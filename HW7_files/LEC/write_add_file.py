""" –° —Ä–µ–∂–∏–º–∞–º–∏ –∑–∞–ø–∏—Å–∏ –º—ã —É–∂–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å.
‚û¢ w ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏. –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç,
–æ—Ç–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ —É–¥–∞–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤ –Ω—ë–º —Ö—Ä–∞–Ω–∏–ª–∏—Å—å.
‚û¢ x ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏. –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤—ã–∑—ã–≤–∞–µ–º
–æ—à–∏–±–∫—É.
‚û¢ a ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–Ω–µ—Ü, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
–ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –Ω–µ–≥–æ.


‚óè –ó–∞–ø–∏—Å—å –º–µ—Ç–æ–¥–æ–º write
–ú–µ—Ç–æ–¥ write –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –Ω–∞–±–æ—Ä –±–∞–π—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ –∫–∞–∫ –≤—ã
–æ—Ç–∫—Ä—ã–ª–∏ —Ñ–∞–π–ª. –ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–π
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. """


text = 'Lorem ipsum dolor sit amet, consectetur adipisicingelit.'
with open('new_data.txt', 'a', encoding='utf-8') as f:
    res = f.write(text)
    print(f'{res = }\n{len(text) = }')


""" –ú–µ—Ç–æ–¥ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É. –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ
–∑–∞–ø–∏—Å–µ–π, –æ–Ω–∏ ‚Äú—Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è‚Äù –≤ —Ñ–∞–π–ª–µ. """

text = ['Lorem ipsum dolor sit amet, consectetur adipisicingelit.',\
        'Consequatur debitis explicabo laboriosam sint suscipittemporibus veniam?', \
            'Accusantiumalis amet fugit iste neque non odit quiasaepe totam velit?', ]
with open('new_data.txt', 'a', encoding='utf-8') as f:
    for line in text:
        res = f.write(f'{line}\n')
        print(f'{res = }\n{len(line) = }')


""" –ï—Å–ª–∏ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–Ω–æ—Å–∞ - \n """

""" –ó–∞–ø–∏—Å—å –º–µ—Ç–æ–¥–æ–º writelines
–ú–µ—Ç–æ–¥ writelines –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç
–∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ —Ñ–∞–π–ª. –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏ –∏–ª–∏
–±–∞–π—Ç–∞–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ –∑–∞–ø–∏—Å–∏.

–í –æ—Ç–ª–∏—á–∏–∏ –æ—Ç write —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. """


with open('new_data.txt', 'a', encoding='utf-8') as f:
    f.writelines('\n'.join(text))

    """ –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ text —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –≤ —Ñ–∞–π–ª–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
–≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å—Ç—Ä–æ–∫–æ–≤—ã–º –º–µ—Ç–æ–¥–æ–º join. writelines –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –º–µ–∂–¥—É
—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. """

""" ‚óè print –≤ —Ñ–∞–π–ª
–§—É–Ω–∫—Ü–∏—è print –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ
–∫–æ–Ω—Å–æ–ª—å. –ù–æ –º–æ–∂–Ω–æ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –ø–µ—á–∞—Ç–∏ –≤ —Ñ–∞–π–ª. –î–ª—è —ç—Ç–æ–≥–æ
–Ω–∞–¥–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–ª—é—á–µ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º file. """



with open('new_data.txt', 'a', encoding='utf-8') as f:
    for line in text:
        print(line, file=f)


""" –í –æ—Ç–ª–∏—á–∏–∏ –æ—Ç –º–µ—Ç–æ–¥–æ–≤ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª, —Ñ—É–Ω–∫—Ü–∏—è print –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏.
–ö—Ä–æ–º–µ —Ç–æ–≥–æ –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç —è–≤–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä end —Ñ—É–Ω–∫—Ü–∏–∏. """



with open('new_data.txt', 'a', encoding='utf-8') as f:
    for line in text:
        print(line, end='***\n##', file=f)


""" –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–æ–º –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º
—Ñ–∞–π–ª–µ. –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –≤ —Å—Ç—Ä–æ–∫–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –≤–ª–µ–≤–æ –∏
–≤–ø—Ä–∞–≤–æ.
‚óè –ú–µ—Ç–æ–¥ tell
–ú–µ—Ç–æ–¥ tell –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –≤ —Ñ–∞–π–ª–µ. """


with open('new_data.txt', 'w', encoding='utf-8') as f:
    print(f.tell())
    for line in text:
        f.write(f'{line}\n')
        print(f.tell())
    print(f.tell())
#print(f.tell()) # ValueError: I/O operation on closed file.

""" ‚óè –ú–µ—Ç–æ–¥ seek
–ú–µ—Ç–æ–¥ seek –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ ‚Äú–∫—É—Ä—Å–æ—Ä–∞‚Äù –≤ —Ñ–∞–π–ª–µ.
seek(offset, whence=0), –≥–¥–µ offset ‚Äî —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–ø–æ—Ä–Ω–æ–π —Ç–æ—á–∫–∏, whence -
—Å–ø–æ—Å–æ–± –≤—ã–±–æ—Ä–∞ –æ–ø–æ—Ä–æ–Ω–æ–π —Ç–æ—á–∫–∏.
‚óè whence = 0 - –æ—Ç—Å—á—ë—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞
‚óè whence = 1 - –æ—Ç—Å—á—ë—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ñ–∞–π–ª–µ
‚óè whence = 2 - –æ—Ç—Å—á—ë—Ç –æ—Ç –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞
üî• –í–∞–∂–Ω–æ! –ó–Ω–∞—á–µ–Ω–∏—è 1 –∏ 2 –¥–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–Ω–∞—Ä–Ω—ã–º–∏
—Ñ–∞–π–ª–∞–º–∏. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ seek(0, 2) –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∫–æ–Ω–µ—Ü —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞.
–ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é ‚Äú–∫—É—Ä—Å–æ—Ä–∞‚Äù. """

last = before = 0

with open('new_data.txt', 'r+', encoding='utf-8') as f:
    while line := f.readline():
        last, before = f.tell(), last
    print(f'{last = }, {before = }')
    print(f'{f.seek(before, 0) = }')
    f.write('\n'.join(text))

""" –í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –º—ã –æ—Ç–∫—Ä—ã–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏.
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ last –∏ before —Ö—Ä–∞–Ω—è—Ç –ø–æ–∑–∏—Ü–∏–∏ –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.
–î–æ—á–∏—Ç–∞–≤ —Ñ–∞–π–ª –≤ —Ü–∏–∫–ª–µ while –¥–æ –∫–æ–Ω—Ü–∞ –∏–∑–º–µ–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é ‚Äú–∫—É—Ä—Å–æ—Ä–∞‚Äù –Ω–∞ –Ω–∞—á–∞–ª–æ
–ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ –∏ –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–ø–∏—Å—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏
—Ñ–∞–π–ª–∞ –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏ –∑–∞–ø–∏—Å–∞–ª–∏ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –≤ –∫–æ–Ω–µ—Ü. """

""" ‚óè –ú–µ—Ç–æ–¥ truncate
truncate(size=None) ‚Äî –º–µ—Ç–æ–¥ –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞. –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤
–ø–∞—Ä–∞–º–µ—Ç—Ä size –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ —á–∞—Å—Ç—å —Ñ–∞–π–ª–∞ –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –¥–æ –∫–æ–Ω—Ü–∞. –ú–µ—Ç–æ–¥
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞. """

last = before = 0
with open('new_data.txt', 'r+', encoding='utf-8') as f:
    while line := f.readline():
        last, before = f.tell(), last
    print(f.seek(before, 0))
    print(f.truncate())

""" –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä size –º–µ—Ç–æ–¥ –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞
—Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –±–∞–π—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞. """

size = 64
with open('new_data.txt', 'r+', encoding='utf-8') as f:
    print(f.truncate(size))


#task

start = 10
stop = 100
with open('data.bin', 'bw+') as f:
    for i in range(start, stop + 1):
        f.write(str(i).encode('utf-8'))
        if i % 3 == 0:
            f.seek(-2, 1)
    f.truncate(stop)
    f.seek(0)
    res = f.read(start)
    print(res.decode('utf-8'))